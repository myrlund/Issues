{% extends "report.html" %}
{% load currency %}

{% block contents %}

	<table>
		<tr>
			<th colspan="2">{{ project.title }}</th>
			<th colspan="2" class="center">Totalt</th>
			<th>&nbsp;</th>
			<th>&nbsp;</th>
			<th colspan="3" class="center">Endringer</th>
		</tr>
		<tr>
			<th colspan="2">Rapport etter Bygningsdelstabell</th>
			<th class="number">Sluttprognose</th>
			<th class="number">Fakturert</th>
			<th class="number">%</th>
			<th class="number">Budsjett</th>
			<th class="number">Godkjent</th>
			<th class="number">Vurdert</th>
			<th class="number">Sum</th>
		</tr>
		{% for group in groups %}
			{% for n, post in group.posts.items %}
				<tr>
					<td>{{ n }}</td>
					<td>{{ post.title }}</td>
					<td class="number">{{ post.total|currency }}</td>
					<td class="number">{{ post.invoices|currency }}</td>
					<td class="number">{{ post.percent|currency:1 }}&nbsp;%</td>
					<td class="number">{{ post.budget|currency }}</td>
					<td class="number">{{ post.accepted|currency }}</td>
					<td class="number">{{ post.pending|currency }}</td>
					<td class="number">{{ post.changes|currency }}</td>
				</tr>
			{% endfor %}
			<tr class="sumrow intermediate">
				<td>&nbsp;</td>
				<td>{{ group.title }}</td>
				<td class="number">{{ group.sum.total|currency }}</td>
				<td class="number">{{ group.sum.invoices|currency }}</td>
				<td class="number">{{ group.sum.percent|currency:1 }}&nbsp;%</td>
				<td class="number">{{ group.sum.budget|currency }}</td>
				<td class="number">{{ group.sum.accepted|currency }}</td>
				<td class="number">{{ group.sum.pending|currency }}</td>
				<td class="number">{{ group.sum.changes|currency }}</td>
			</tr>
		{% endfor %}
	</table>
		
{% endblock %}
